define(["Modernizr","addTest","prefixed","test/indexeddb"],function(e,t,d){e.addAsyncTest(function(){var n=d("indexedDB",window),o="detect-blob-support",r=!1,s,a;if(!e.indexeddb||!e.indexeddb.deleteDatabase)return!1;try{n.deleteDatabase(o).onsuccess=function(){s=n.open(o,1),s.onupgradeneeded=function(){s.result.createObjectStore("store")},s.onsuccess=function(){a=s.result;try{a.transaction("store","readwrite").objectStore("store").put(new Blob,"key"),r=!0}catch(e){r=!1}finally{t("indexeddbblob",r),a.close(),n.deleteDatabase(o)}}}}catch(c){t("indexeddbblob",!1)}})});